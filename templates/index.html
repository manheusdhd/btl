<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>Flask Messenger</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script>
    // HÃ m nháº¯c tÃªn khi click vÃ o tÃªn
    function mentionName(name) {
      let input = document.getElementById("message-input");
      input.value = "@" + name + " " + input.value;
      input.focus();
    }

    // HÃ m chá»‰nh sá»­a tin nháº¯n
    function editMessage(id, oldText) {
      let input = document.getElementById("message-input");
      let form = document.getElementById("chat-form");
      input.value = oldText;
      form.action = "/edit/" + id;   // gá»­i Ä‘áº¿n /edit/<id>
      input.focus();
    }
  </script>
</head>
<body>
  <div class="chat-container">
    <header>
      <h1>ðŸ’¬ Flask Messenger</h1>
    </header>

    <!-- Form gá»­i tin -->
    <form id="chat-form" action="/send" method="post" class="chat-form">
      <input name="name" placeholder="TÃªn (tÃ¹y)" value="{{ request.form.name or '' }}">
      <input id="message-input" name="text" placeholder="Nháº­p tin nháº¯n..." required>
      <button type="submit">Gá»­i</button>
    </form>

    <!-- Danh sÃ¡ch tin nháº¯n -->
    <ul class="messages">
      {% for m in messages %}
        <li>
          <strong onclick="mentionName('{{ m.name }}')">{{ m.name }}</strong>:
          <span>{{ m.text }}</span>
          <button class="edit-btn" onclick="editMessage({{ loop.index0 }}, '{{ m.text }}')">Sá»­a</button>
        </li>
      {% else %}
        <li class="empty">ChÆ°a cÃ³ tin nháº¯n nÃ o.</li>
      {% endfor %}
    </ul>
  </div>
</body>
</html>
